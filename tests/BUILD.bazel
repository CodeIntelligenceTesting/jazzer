load("//bazel:fuzz_target.bzl", "java_fuzz_target_test")

genrule(
    name = "ExampleLongStringFailingInput",
    outs = ["failingInput"],
    cmd = "dd if=/dev/zero bs=100KB count=1 > \"$@\"",
)

java_fuzz_target_test(
    name = "ExampleLongStringFuzzer",
    srcs = [
        "src/main/java/com/example/ExampleLongStringFuzzer.java",
    ],
    data = [":ExampleLongStringFailingInput"],
    execute_crash_reproducer = True,
    fuzzer_args = [
        "$(rootpath :ExampleLongStringFailingInput)",
    ],
    target_class = "com.example.ExampleLongStringFuzzer",
    verify_crash_input = False,
)
